<h1 mat-dialog-title>Generate</h1>
<div mat-dialog-content class="mat-dialog-content-container">

  <div [formGroup]="form">
    <div>
      <mat-form-field>
        <mat-label>Subsystem</mat-label>
        <mat-select formControlName="subsystem" required>
          <mat-option *ngFor="let subsystem of modules$ | async" [value]="subsystem">
            {{subsystem.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div>
      <mat-form-field>
        <mat-label>Pattern</mat-label>
        <mat-select formControlName="pattern" required>
          <mat-option *ngFor="let pattern of patterns$ | async" [value]="pattern">
            {{pattern.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="parameters$ | async">
      <ng-container formArrayName="parameters">
        <ng-container *ngFor="let paramForm of parameters.controls; let i = index">
          <div [formGroupName]="i">
            <div class="params-container">
              <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" class="w-100">
              </mat-form-field>

              <mat-form-field>
                <mat-label>Value</mat-label>
                  <input matInput formControlName="value" class="w-100" >
              </mat-form-field>

            </div>
          </div>
        </ng-container>
      </ng-container>
    </div>

  </div>

</div>
<div mat-dialog-actions class="dialog-action-container">
  <button mat-button mat-dialog-close>Cancel</button>
  <button mat-button cdkFocusInitial (click)="generate()" >Generate</button>
</div>
